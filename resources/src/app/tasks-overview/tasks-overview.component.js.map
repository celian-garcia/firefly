{"version":3,"file":"tasks-overview.component.js","sourceRoot":"","sources":["../../../../src/app/tasks-overview/tasks-overview.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, ViewContainerRef, Input, EventEmitter, Output} from '@angular/core';\nimport {TaskService} from '../api-firefly/task.service';\nimport {Task} from '../api-firefly/data/Task';\nimport {Modal} from 'angular2-modal/plugins/bootstrap/modal';\nimport {overlayConfigFactory} from 'angular2-modal';\nimport {TaskModalComponent} from './task-modal.component';\nimport {BSModalContext} from 'angular2-modal/plugins/bootstrap';\nimport {ModuleService} from '../api-firefly/module.service';\nimport {ToolbarButtonService} from 'app/toolbar/toolbar-button.service';\nimport {isNullOrUndefined} from 'util';\n\n@Component({\n    selector: 'app-tasks-overview',\n    providers: [TaskService, ModuleService],\n    templateUrl: './tasks-overview.component.html',\n    styleUrls: ['./tasks-overview.component.css']\n})\nexport class TasksOverviewComponent implements OnInit {\n\n    static VIEWS_MAP: { [key: number]: string; } = {\n        0: 'line',\n        1: 'card'\n    };\n\n    @Output() clickTask: EventEmitter<Task> = new EventEmitter();\n    error_message: string;\n    tasks: Task[];\n    view_name: string;\n\n    constructor(vcRef: ViewContainerRef, public modal: Modal, private taskService: TaskService,\n                private _toolbarButtonService: ToolbarButtonService) {\n        this.modal.overlay.defaultViewContainer = vcRef;\n    }\n\n    ngOnInit() {\n        this._toolbarButtonService.subscribeCreateTask(_ => this._openCreationModal());\n        this._toolbarButtonService.subscribeToggleView(view_id => this._setView(view_id));\n        this.refreshTasksList();\n    }\n\n    refreshTasksList() {\n        this.taskService.getTasks()\n            .subscribe(\n                tasks => this.tasks = tasks,\n                error => this.error_message = <any>error);\n    }\n\n    private _setView(view_id: number) {\n        console.log('Received toggle view event');\n        this.view_name = TasksOverviewComponent.VIEWS_MAP[view_id];\n    }\n\n    private _openCreationModal() {\n        console.log('Received task creation event');\n        this.modal.open(TaskModalComponent, overlayConfigFactory({num1: 2, num2: 3}, BSModalContext))\n            .then((dialog) => {\n                    dialog.result.then(result => {\n                        if (!isNullOrUndefined(result)) {\n                            this.tasks.push(result);\n                        }\n                    }).catch((err) => {\n                        alert(err);\n                    });\n                }\n            );\n    }\n\n    onClick(task: Task) {\n        console.log (\"Sent task :\");\n        console.log (task);\n        this.clickTask.next(task);\n    }\n\n}\n"]}